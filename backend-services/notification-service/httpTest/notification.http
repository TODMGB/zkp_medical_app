### ==========================================
### Notification Service API Tests
### ==========================================

@baseUrl = http://localhost:3006
@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzbWFydF9hY2NvdW50IjoiMHgxMjM0NTY3ODkwYWJjZGVmMTIzNDU2Nzg5MGFiY2RlZjEyMzQ1Njc4IiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c

### ==========================================
### 1. å¥åº·æ£€æŸ¥
### ==========================================
GET {{baseUrl}}/health

### ==========================================
### 2. å‘é€é€šçŸ¥ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰
### ==========================================
POST {{baseUrl}}/api/notifications/send
Content-Type: application/json

{
  "recipient_address": "0x1234567890abcdef1234567890abcdef12345678",
  "type": "MEDICATION_REMINDER",
  "priority": "HIGH",
  "title": "ğŸ”” ç”¨è¯æé†’",
  "body": "æ‚¨è¯¥æœç”¨é™å‹è¯äº†ï¼",
  "data": {
    "medication_id": "med_123",
    "medication_name": "é˜¿å¸åŒ¹æ—",
    "dosage": "1ç‰‡"
  },
  "channels": ["push", "websocket"]
}

### ==========================================
### 3. å‘é€é€šçŸ¥ï¼ˆæ™®é€šä¼˜å…ˆçº§ï¼‰
### ==========================================
POST {{baseUrl}}/api/notifications/send
Content-Type: application/json

{
  "recipient_address": "0x1234567890abcdef1234567890abcdef12345678",
  "type": "INVITATION_ACCEPTED",
  "priority": "NORMAL",
  "title": "ğŸ‘‹ é‚€è¯·å·²æ¥å—",
  "body": "å¼ åŒ»ç”Ÿæ¥å—äº†æ‚¨çš„é‚€è¯·",
  "data": {
    "inviter_address": "0xabcdef1234567890abcdef1234567890abcdef12"
  },
  "channels": ["websocket"]
}

### ==========================================
### 4. è·å–é€šçŸ¥åˆ—è¡¨
### ==========================================
GET {{baseUrl}}/api/notifications?limit=20&offset=0
Authorization: Bearer {{token}}

### ==========================================
### 5. è·å–æœªè¯»é€šçŸ¥åˆ—è¡¨
### ==========================================
GET {{baseUrl}}/api/notifications?status=unread&limit=20
Authorization: Bearer {{token}}

### ==========================================
### 6. è·å–æœªè¯»é€šçŸ¥æ•°é‡
### ==========================================
GET {{baseUrl}}/api/notifications/unread/count
Authorization: Bearer {{token}}

### ==========================================
### 7. æ ‡è®°é€šçŸ¥ä¸ºå·²è¯»
### ==========================================
PUT {{baseUrl}}/api/notifications/0x123456/read
Authorization: Bearer {{token}}

### ==========================================
### 8. æ ‡è®°æ‰€æœ‰é€šçŸ¥ä¸ºå·²è¯»
### ==========================================
PUT {{baseUrl}}/api/notifications/read-all
Authorization: Bearer {{token}}

### ==========================================
### 9. åˆ é™¤é€šçŸ¥
### ==========================================
DELETE {{baseUrl}}/api/notifications/0x123456
Authorization: Bearer {{token}}

### ==========================================
### WebSocketè¿æ¥æµ‹è¯•ï¼ˆä½¿ç”¨æµè§ˆå™¨æ§åˆ¶å°ï¼‰
### ==========================================
### 
### const token = 'your_jwt_token';
### const ws = new WebSocket(`ws://localhost:3000/ws/notification/socket.io?token=${token}`);
### 
### ws.onopen = () => console.log('âœ… Connected');
### ws.onmessage = (e) => console.log('ğŸ“¥ Message:', JSON.parse(e.data));
### ws.onerror = (e) => console.error('âŒ Error:', e);
### ws.onclose = () => console.log('ğŸ”Œ Disconnected');
### 
### // å‘é€å¿ƒè·³
### ws.send(JSON.stringify({ type: 'ping' }));
### 
### // æ ‡è®°å·²è¯»
### ws.send(JSON.stringify({ type: 'mark_read', notification_id: '0x123456' }));
###

