<template>
  <div class="test-center">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <div class="header">
      <button class="back-btn" @click="goBack">
        <ArrowLeft class="icon" />
      </button>
      <h1 class="page-title">æµ‹è¯•ä¸­å¿ƒ</h1>
    </div>

    <!-- ä¸»è¦å†…å®¹ -->
    <div class="content">
      <!-- å¼€å‘ç¯å¢ƒæç¤º -->
      <div class="dev-notice">
        <div class="notice-icon-wrapper">
          <FlaskConical class="notice-icon" />
        </div>
        <div class="notice-content">
          <h3>å¼€å‘æµ‹è¯•ç¯å¢ƒ</h3>
          <p>æ­¤é¡µé¢åŒ…å«æ‰€æœ‰å¼€å‘å’Œæµ‹è¯•åŠŸèƒ½ï¼Œä»…åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨</p>
        </div>
      </div>

      <!-- æ ¸å¿ƒåŠŸèƒ½æµ‹è¯• -->
      <div class="test-section">
        <h2 class="section-title">
          <Wrench class="section-icon" />
          æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
        </h2>
        
        <div class="test-grid">
          <div class="test-card" @click="goToZkpTest">
            <div class="card-icon-wrapper">
              <ShieldCheck class="card-icon" />
            </div>
            <div class="card-content">
              <h3 class="card-title">é›¶çŸ¥è¯†è¯æ˜</h3>
              <p class="card-desc">æµ‹è¯•ZKPç”Ÿæˆå’ŒéªŒè¯åŠŸèƒ½</p>
            </div>
            <ChevronRight class="card-arrow" />
          </div>

          <div class="test-card" @click="goToWallet">
            <div class="card-icon-wrapper">
              <Wallet class="card-icon" />
            </div>
            <div class="card-content">
              <h3 class="card-title">é’±åŒ…ç®¡ç†</h3>
              <p class="card-desc">ä»¥å¤ªåŠé’±åŒ…åˆ›å»ºå’Œç®¡ç†</p>
            </div>
            <ChevronRight class="card-arrow" />
          </div>

          <div class="test-card" @click="goToAccountAbstraction">
            <div class="card-icon-wrapper">
              <Blocks class="card-icon" />
            </div>
            <div class="card-content">
              <h3 class="card-title">è´¦æˆ·æŠ½è±¡</h3>
              <p class="card-desc">ERC-4337æ™ºèƒ½åˆçº¦è´¦æˆ·</p>
            </div>
            <ChevronRight class="card-arrow" />
          </div>

          <div class="test-card" @click="goToWeeklySummary">
            <div class="card-icon-wrapper">
              <ClipboardList class="card-icon" />
            </div>
            <div class="card-content">
              <h3 class="card-title">å‘¨æ‰“å¡æ±‡æ€»</h3>
              <p class="card-desc">æµ‹è¯•å‘¨åº¦æ‰“å¡å’Œè¯æ˜ç”Ÿæˆ</p>
            </div>
            <ChevronRight class="card-arrow" />
          </div>

          <div class="test-card" @click="testMedicationDecryption">
            <div class="card-icon-wrapper">
              <Lock class="card-icon" />
            </div>
            <div class="card-content">
              <h3 class="card-title">åŒ»è¯ä¿¡æ¯è§£å¯†</h3>
              <p class="card-desc">æµ‹è¯•åŠ å¯†åŒ»è¯è®¡åˆ’çš„è§£å¯†</p>
            </div>
            <ChevronRight class="card-arrow" />
          </div>
        </div>
      </div>

      <!-- è¿ç§»åŠŸèƒ½æµ‹è¯• -->
      <div class="test-section">
        <h2 class="section-title">
          <Smartphone class="section-icon" />
          è¿ç§»åŠŸèƒ½æµ‹è¯•
        </h2>
        
        <div class="test-grid">
          <div class="test-card" @click="goToMigrationTest">
            <div class="card-icon-wrapper">
              <TestTube2 class="card-icon" />
            </div>
            <div class="card-content">
              <h3 class="card-title">è¿ç§»åŠŸèƒ½æµ‹è¯•</h3>
              <p class="card-desc">æµ‹è¯•è´¦æˆ·è¿ç§»çš„å„é¡¹åŠŸèƒ½</p>
            </div>
            <ChevronRight class="card-arrow" />
          </div>

          <div class="test-card" @click="goToOldDeviceMigration">
            <div class="card-icon-wrapper">
              <Upload class="card-icon" />
            </div>
            <div class="card-content">
              <h3 class="card-title">æ—§è®¾å¤‡è¿ç§»</h3>
              <p class="card-desc">æ¨¡æ‹Ÿæ—§è®¾å¤‡å‘èµ·è¿ç§»</p>
            </div>
            <ChevronRight class="card-arrow" />
          </div>

          <div class="test-card" @click="goToNewDeviceImport">
            <div class="card-icon-wrapper">
              <Download class="card-icon" />
            </div>
            <div class="card-content">
              <h3 class="card-title">æ–°è®¾å¤‡å¯¼å…¥</h3>
              <p class="card-desc">æ¨¡æ‹Ÿæ–°è®¾å¤‡å¯¼å…¥è´¦æˆ·</p>
            </div>
            <ChevronRight class="card-arrow" />
          </div>
        </div>
      </div>

      <!-- ç”¨æˆ·æµç¨‹æµ‹è¯• -->
      <div class="test-section">
        <h2 class="section-title">
          <User class="section-icon" />
          ç”¨æˆ·æµç¨‹æµ‹è¯•
        </h2>
        
        <div class="test-grid">
          <div class="test-card" @click="goToSplash">
            <div class="card-icon-wrapper">
              <Home class="card-icon" />
            </div>
            <div class="card-content">
              <h3 class="card-title">æ¬¢è¿é¡µé¢</h3>
              <p class="card-desc">åº”ç”¨å¯åŠ¨å’Œç”¨æˆ·å¼•å¯¼</p>
            </div>
            <ChevronRight class="card-arrow" />
          </div>

          <div class="test-card" @click="goToAccountChoice">
            <div class="card-icon-wrapper">
              <Zap class="card-icon" />
            </div>
            <div class="card-content">
              <h3 class="card-title">è´¦æˆ·é€‰æ‹©</h3>
              <p class="card-desc">æ–°ç”¨æˆ·è´¦æˆ·ç±»å‹é€‰æ‹©</p>
            </div>
            <ChevronRight class="card-arrow" />
          </div>

          <div class="test-card" @click="goToSignup">
            <div class="card-icon-wrapper">
              <Sparkles class="card-icon" />
            </div>
            <div class="card-content">
              <h3 class="card-title">ç”¨æˆ·æ³¨å†Œ</h3>
              <p class="card-desc">èº«ä»½éªŒè¯å’Œè´¦æˆ·åˆ›å»º</p>
            </div>
            <ChevronRight class="card-arrow" />
          </div>

          <div class="test-card" @click="goToRegistrationFlowTest">
            <div class="card-icon-wrapper">
              <RefreshCw class="card-icon" />
            </div>
            <div class="card-content">
              <h3 class="card-title">æ³¨å†Œæµç¨‹æµ‹è¯•</h3>
              <p class="card-desc">å®Œæ•´æ³¨å†Œæµç¨‹çš„è‡ªåŠ¨åŒ–æµ‹è¯•</p>
            </div>
            <ChevronRight class="card-arrow" />
          </div>
        </div>
      </div>

      <!-- å·¥å…·å’ŒçŠ¶æ€ -->
      <div class="test-section">
        <h2 class="section-title">
          <PenTool class="section-icon" />
          å¼€å‘å·¥å…·
        </h2>
        
        <div class="tools-grid">
          <div class="tool-card" @click="clearAllData">
            <div class="tool-icon-wrapper">
              <Trash2 class="tool-icon" />
            </div>
            <div class="tool-content">
              <h4 class="tool-title">æ¸…é™¤æ‰€æœ‰æ•°æ®</h4>
              <p class="tool-desc">é‡ç½®åº”ç”¨åˆ°åˆå§‹çŠ¶æ€</p>
            </div>
          </div>

          <div class="tool-card" @click="showCacheManager">
            <div class="tool-icon-wrapper">
              <Package class="tool-icon" />
            </div>
            <div class="tool-content">
              <h4 class="tool-title">ç¼“å­˜ç®¡ç†</h4>
              <p class="tool-desc">ç»†ç²’åº¦æ¸…é™¤å„ç±»ç¼“å­˜</p>
            </div>
          </div>

          <div class="tool-card" @click="toggleRegistrationStatus">
            <div class="tool-icon-wrapper">
              <RefreshCw class="tool-icon" />
            </div>
            <div class="tool-content">
              <h4 class="tool-title">åˆ‡æ¢æ³¨å†ŒçŠ¶æ€</h4>
              <p class="tool-desc">æ¨¡æ‹Ÿå·²æ³¨å†Œ/æœªæ³¨å†ŒçŠ¶æ€</p>
            </div>
          </div>

          <div class="tool-card" @click="showSystemInfo">
            <div class="tool-icon-wrapper">
              <Info class="tool-icon" />
            </div>
            <div class="tool-content">
              <h4 class="tool-title">ç³»ç»Ÿä¿¡æ¯</h4>
              <p class="tool-desc">æŸ¥çœ‹è®¾å¤‡å’Œåº”ç”¨ä¿¡æ¯</p>
            </div>
          </div>
        </div>
      </div>

      <!-- çŠ¶æ€ä¿¡æ¯ -->
      <div class="status-section">
        <h3 class="status-title">å½“å‰çŠ¶æ€</h3>
        <div class="status-grid">
          <div class="status-item">
            <span class="status-label">æ³¨å†ŒçŠ¶æ€</span>
            <span class="status-value" :class="{ 'registered': isRegistered }">
              {{ isRegistered ? 'å·²æ³¨å†Œ' : 'æœªæ³¨å†Œ' }}
            </span>
          </div>
          <div class="status-item">
            <span class="status-label">å½“å‰è·¯ç”±</span>
            <span class="status-value">{{ currentRoute }}</span>
          </div>
          <div class="status-item">
            <span class="status-label">è®¾å¤‡ID</span>
            <span class="status-value">{{ deviceId }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue';
import { useRouter, useRoute } from 'vue-router';
import { aaService } from '@/service/accountAbstraction';
import { Preferences } from '@capacitor/preferences';
import { Device } from '@capacitor/device';
import { CLEAR_GROUPS, KEY_CATEGORIES } from '@/config/storage.config';
import { medicationPlanStorageService } from '@/service/medicationPlanStorage';
import { medicationService } from '@/service/medication';
import { authService } from '@/service/auth';
import { secureExchangeService } from '@/service/secureExchange';
import { uiService } from '@/service/ui';
import { 
  ArrowLeft, 
  FlaskConical, 
  Wrench, 
  ShieldCheck, 
  Wallet, 
  Blocks, 
  ClipboardList, 
  Smartphone, 
  TestTube2, 
  Upload, 
  Download, 
  User, 
  Home, 
  Zap, 
  Sparkles, 
  RefreshCw, 
  PenTool, 
  Trash2, 
  Package, 
  Info,
  ChevronRight,
  Lock
} from 'lucide-vue-next';

const router = useRouter();
const route = useRoute();

// å“åº”å¼æ•°æ®
const isRegistered = ref(false);
const deviceId = ref('');

const currentRoute = computed(() => route.path);

// è¿”å›ä¸Šä¸€é¡µ
const goBack = () => {
  router.back();
};

// æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
const goToZkpTest = () => {
  router.push('/dev');
};

const goToWallet = () => {
  router.push('/dev/wallet');
};

const goToAccountAbstraction = () => {
  router.push('/dev/aa');
};

const goToWeeklySummary = () => {
  router.push('/weekly-summary');
};

// åŒ»è¯ä¿¡æ¯è§£å¯†æµ‹è¯•
const testMedicationDecryption = async () => {
  try {
    console.log('ğŸ” å¼€å§‹åŒ»è¯ä¿¡æ¯è§£å¯†æµ‹è¯•...');
    
    // 1. è·å–æ‰€æœ‰ä¿å­˜çš„ç”¨è¯è®¡åˆ’
    const allPlans = await medicationPlanStorageService.getAllPlans();
    
    if (allPlans.length === 0) {
      uiService.toast('âŒ æ²¡æœ‰æ‰¾åˆ°ä¿å­˜çš„ç”¨è¯è®¡åˆ’ï¼Œè¯·å…ˆæ¥æ”¶ä¸€ä¸ªç”¨è¯è®¡åˆ’', { type: 'warning' });
      return;
    }
    
    console.log(`ğŸ“‹ æ‰¾åˆ° ${allPlans.length} ä¸ªç”¨è¯è®¡åˆ’`);
    
    // 2. è·å–ç¬¬ä¸€ä¸ªè®¡åˆ’çš„è¯¦ç»†ä¿¡æ¯
    const fullPlan = allPlans[0];
    
    if (!fullPlan) {
      uiService.toast('âŒ æ— æ³•è·å–ç”¨è¯è®¡åˆ’è¯¦æƒ…', { type: 'error' });
      return;
    }
    
    console.log('ğŸ“ è®¡åˆ’ä¿¡æ¯:', fullPlan);
    
    // 3. æ£€æŸ¥æ˜¯å¦æœ‰åŠ å¯†æ•°æ®
    if (!fullPlan.encrypted_plan_data) {
      uiService.toast('âŒ è®¡åˆ’ä¸­æ²¡æœ‰åŠ å¯†æ•°æ®', { type: 'error' });
      return;
    }
    
    console.log('ğŸ”’ åŠ å¯†æ•°æ®é•¿åº¦:', fullPlan.encrypted_plan_data.length, 'å­—ç¬¦');
    
    // 4. è·å–ç”¨æˆ·é’±åŒ…å’ŒåŒ»ç”Ÿå…¬é’¥
    const userInfo = await authService.getUserInfo();
    if (!userInfo) {
      uiService.toast('âŒ æ— æ³•è·å–ç”¨æˆ·ä¿¡æ¯', { type: 'error' });
      return;
    }
    
    const wallet = await aaService.getEOAWallet();
    if (!wallet) {
      uiService.toast('âŒ æ— æ³•è·å–é’±åŒ…', { type: 'error' });
      return;
    }
    
    console.log('ğŸ‘¤ ç”¨æˆ·åœ°å€:', userInfo.smart_account);
    console.log('ğŸ‘¨â€âš•ï¸ åŒ»ç”Ÿåœ°å€:', fullPlan.doctor_address);
    
    // 5. è·å–åŒ»ç”Ÿçš„å…¬é’¥
    console.log('ğŸ”‘ è·å–åŒ»ç”Ÿå…¬é’¥...');
    const doctorPublicKey = await secureExchangeService.getRecipientPublicKey(
      fullPlan.doctor_address
    );
    console.log('  âœ… åŒ»ç”Ÿå…¬é’¥è·å–æˆåŠŸ');
    
    // 6. è§£å¯†è®¡åˆ’æ•°æ®
    console.log('ğŸ”“ å¼€å§‹è§£å¯†...');
    const decryptedPlan = await medicationService.decryptPlanData(
      fullPlan.encrypted_plan_data,
      wallet.privateKey,
      doctorPublicKey
    );
    
    console.log('âœ… è§£å¯†æˆåŠŸï¼');
    console.log('ğŸ“‹ è§£å¯†åçš„è®¡åˆ’æ•°æ®:', decryptedPlan);
    
    // 6. æ˜¾ç¤ºè§£å¯†ç»“æœ
    const resultMessage = `
âœ… åŒ»è¯ä¿¡æ¯è§£å¯†æˆåŠŸï¼

ğŸ“‹ è®¡åˆ’ä¿¡æ¯ï¼š
â€¢ è®¡åˆ’åç§°: ${decryptedPlan.plan_name}
â€¢ è¯Šæ–­: ${decryptedPlan.diagnosis}
â€¢ å¼€å§‹æ—¥æœŸ: ${decryptedPlan.start_date}
â€¢ ç»“æŸæ—¥æœŸ: ${decryptedPlan.end_date}

ğŸ’Š è¯ç‰©æ•°é‡: ${decryptedPlan.medications.length} ç§
â° æé†’æ•°é‡: ${decryptedPlan.reminders.length} ä¸ª

ğŸ“ åŒ»å˜±å¤‡æ³¨: ${decryptedPlan.notes || 'æ— '}

ğŸ” åŠ å¯†çŠ¶æ€: å·²æˆåŠŸè§£å¯†
    `.trim();
    
    await uiService.alert(resultMessage, { title: 'è§£å¯†ç»“æœ', confirmText: 'æˆ‘çŸ¥é“äº†' });
    
    // 7. æ‰“å°è¯¦ç»†ä¿¡æ¯åˆ°æ§åˆ¶å°
    console.log('=== å®Œæ•´è§£å¯†æ•°æ® ===');
    console.log('è®¡åˆ’åç§°:', decryptedPlan.plan_name);
    console.log('è¯Šæ–­:', decryptedPlan.diagnosis);
    console.log('è¯ç‰©åˆ—è¡¨:', decryptedPlan.medications);
    console.log('æé†’åˆ—è¡¨:', decryptedPlan.reminders);
    console.log('åŒ»å˜±å¤‡æ³¨:', decryptedPlan.notes);
    
  } catch (error) {
    console.error('âŒ è§£å¯†å¤±è´¥:', error);
    uiService.toast(`âŒ è§£å¯†å¤±è´¥: ${error instanceof Error ? error.message : String(error)}`, { type: 'error' });
  }
};

// è¿ç§»åŠŸèƒ½æµ‹è¯•
const goToMigrationTest = () => {
  router.push('/test-migration');
};

const goToOldDeviceMigration = () => {
  router.push('/account-migration');
};

const goToNewDeviceImport = () => {
  router.push('/import-account');
};

// ç”¨æˆ·æµç¨‹æµ‹è¯•
const goToSplash = () => {
  router.push('/splash');
};

const goToAccountChoice = () => {
  router.push('/account-choice');
};

const goToSignup = () => {
  router.push('/signup');
};

const goToRegistrationFlowTest = () => {
  router.push('/test-registration-flow');
};

// å¼€å‘å·¥å…·
const clearAllData = async () => {
  const ok = await uiService.confirm('âš ï¸ ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æ•°æ®å—ï¼Ÿè¿™å°†é‡ç½®åº”ç”¨åˆ°åˆå§‹çŠ¶æ€ï¼Œä¸å¯æ¢å¤ï¼', {
    title: 'å±é™©æ“ä½œ',
    confirmText: 'æ¸…é™¤',
    cancelText: 'å–æ¶ˆ',
  })
  if (!ok) return;

  try {
    // æ¸…é™¤æ‰€æœ‰æœ¬åœ°å­˜å‚¨
    await Preferences.clear();
    
    uiService.toast('âœ… æ‰€æœ‰æ•°æ®å·²æ¸…é™¤ï¼Œåº”ç”¨å·²é‡ç½®åˆ°åˆå§‹çŠ¶æ€', { type: 'success' });
    
    // åˆ·æ–°çŠ¶æ€
    await checkStatus();
    
    // è·³è½¬åˆ°æ¬¢è¿é¡µé¢
    router.push('/splash');
  } catch (error) {
    console.error('æ¸…é™¤æ•°æ®å¤±è´¥:', error);
    uiService.toast('âŒ æ¸…é™¤æ•°æ®å¤±è´¥', { type: 'error' });
  }
};

const showCacheManager = () => {
  router.push('/cache-manager');
};

const toggleRegistrationStatus = async () => {
  try {
    if (isRegistered.value) {
      // æ¸…é™¤æ³¨å†ŒçŠ¶æ€
      await Preferences.remove({ key: 'accountInfo' });
      await Preferences.remove({ key: 'userInfo' });
      await Preferences.remove({ key: 'biometric' });
      uiService.toast('âœ… å·²åˆ‡æ¢åˆ°æœªæ³¨å†ŒçŠ¶æ€', { type: 'success' });
    } else {
      // è®¾ç½®ä¸ºå·²æ³¨å†ŒçŠ¶æ€
      await Preferences.set({
        key: 'accountInfo',
        value: JSON.stringify({
          address: '0x1234567890abcdef',
          ownerAddress: '0xabcdef1234567890',
          isDeployed: true
        })
      });
      
      await Preferences.set({
        key: 'userInfo',
        value: JSON.stringify({
          username: 'æµ‹è¯•ç”¨æˆ·', // ä½¿ç”¨ UserInfo æ¥å£çš„å­—æ®µå
          phoneNumber: '13800138000'
        })
      });
      
      uiService.toast('âœ… å·²åˆ‡æ¢åˆ°å·²æ³¨å†ŒçŠ¶æ€', { type: 'success' });
    }
    
    await checkStatus();
  } catch (error) {
    console.error('åˆ‡æ¢æ³¨å†ŒçŠ¶æ€å¤±è´¥:', error);
    uiService.toast('âŒ åˆ‡æ¢çŠ¶æ€å¤±è´¥', { type: 'error' });
  }
};

const showSystemInfo = async () => {
  try {
    const deviceInfo = await Device.getInfo();
    const deviceIdInfo = await Device.getId();
    
    const info = `
è®¾å¤‡ä¿¡æ¯ï¼š
â€¢ å¹³å°: ${deviceInfo.platform}
â€¢ æ“ä½œç³»ç»Ÿ: ${deviceInfo.operatingSystem}
â€¢ ç‰ˆæœ¬: ${deviceInfo.osVersion}
â€¢ è®¾å¤‡ID: ${deviceIdInfo.identifier}
â€¢ åˆ¶é€ å•†: ${deviceInfo.manufacturer}
â€¢ å‹å·: ${deviceInfo.model}
â€¢ æ˜¯å¦è™šæ‹Ÿè®¾å¤‡: ${deviceInfo.isVirtual ? 'æ˜¯' : 'å¦'}

åº”ç”¨ä¿¡æ¯ï¼š
â€¢ å½“å‰è·¯ç”±: ${route.path}
â€¢ æ³¨å†ŒçŠ¶æ€: ${isRegistered.value ? 'å·²æ³¨å†Œ' : 'æœªæ³¨å†Œ'}
    `.trim();
    
    await uiService.alert(info, { title: 'ç³»ç»Ÿä¿¡æ¯', confirmText: 'æˆ‘çŸ¥é“äº†' });
  } catch (error) {
    console.error('è·å–ç³»ç»Ÿä¿¡æ¯å¤±è´¥:', error);
    uiService.toast('âŒ è·å–ç³»ç»Ÿä¿¡æ¯å¤±è´¥', { type: 'error' });
  }
};

// æ£€æŸ¥çŠ¶æ€
const checkStatus = async () => {
  try {
    isRegistered.value = await aaService.isRegistered();
    const deviceInfo = await Device.getId();
    deviceId.value = deviceInfo.identifier.slice(0, 8) + '...';
  } catch (error) {
    console.error('æ£€æŸ¥çŠ¶æ€å¤±è´¥:', error);
  }
};

// ç»„ä»¶æŒ‚è½½
onMounted(() => {
  checkStatus();
});
</script>

<style scoped>
.test-center {
  min-height: 100vh;
  background: var(--bg-body);
  display: flex;
  flex-direction: column;
}

/* é¡¶éƒ¨å¯¼èˆª */
.header {
  padding: 20px 24px;
  display: flex;
  align-items: center;
  gap: 16px;
  background: #667eea;
  color: white;
  box-shadow: var(--shadow-md);
}

.back-btn {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  backdrop-filter: blur(10px);
  color: white;
}

.back-btn:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.05);
}

.page-title {
  color: white;
  font-size: 1.25rem;
  font-weight: 600;
  margin: 0;
}

/* ä¸»è¦å†…å®¹ */
.content {
  flex: 1;
  background: var(--bg-body);
  border-radius: 24px 24px 0 0;
  padding: 24px;
  margin-top: -20px;
  background: var(--bg-body);
  position: relative;
  z-index: 10;
}

/* å¼€å‘ç¯å¢ƒæç¤º */
.dev-notice {
  background: #fff7ed;
  border: 1px solid #fed7aa;
  border-radius: var(--border-radius-lg);
  padding: 16px;
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 24px;
  box-shadow: var(--shadow-sm);
}

.notice-icon-wrapper {
  width: 48px;
  height: 48px;
  background: #fff;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-warning);
}

.notice-icon {
  width: 24px;
  height: 24px;
}

.notice-content h3 {
  margin: 0 0 4px 0;
  color: #9a3412;
  font-size: 1rem;
  font-weight: 600;
}

.notice-content p {
  margin: 0;
  color: #c2410c;
  font-size: 0.875rem;
  line-height: 1.4;
}

/* æµ‹è¯•åŒºåŸŸ */
.test-section {
  margin-bottom: 32px;
}

.section-title {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0 0 16px 0;
  color: var(--text-primary);
  font-size: 1.125rem;
  font-weight: 600;
}

.section-icon {
  width: 20px;
  height: 20px;
  color: var(--color-primary);
}

/* æµ‹è¯•å¡ç‰‡ç½‘æ ¼ */
.test-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 16px;
}

.test-card {
  background: var(--bg-surface);
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius-lg);
  padding: 20px;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  display: flex;
  align-items: center;
  gap: 16px;
  box-shadow: var(--shadow-sm);
}

.test-card:hover {
  border-color: var(--color-primary);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.card-icon-wrapper {
  width: 48px;
  height: 48px;
  background: var(--primary-50);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-primary);
  flex-shrink: 0;
  transition: all 0.3s ease;
}

.test-card:hover .card-icon-wrapper {
  background: var(--color-primary);
  color: white;
}

.card-icon {
  width: 24px;
  height: 24px;
}

.card-content {
  flex: 1;
}

.card-title {
  margin: 0 0 4px 0;
  color: var(--text-primary);
  font-size: 1rem;
  font-weight: 600;
}

.card-desc {
  margin: 0;
  color: var(--text-secondary);
  font-size: 0.875rem;
  line-height: 1.4;
}

.card-arrow {
  color: var(--gray-400);
  width: 20px;
  height: 20px;
  transition: transform 0.3s ease;
}

.test-card:hover .card-arrow {
  transform: translateX(4px);
  color: var(--color-primary);
}

/* å·¥å…·ç½‘æ ¼ */
.tools-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 12px;
}

.tool-card {
  background: var(--gray-50);
  border: 1px solid transparent;
  border-radius: var(--border-radius-md);
  padding: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 12px;
}

.tool-card:hover {
  background: var(--bg-surface);
  border-color: var(--border-color);
  box-shadow: var(--shadow-sm);
}

.tool-icon-wrapper {
  width: 40px;
  height: 40px;
  background: white;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
  border: 1px solid var(--gray-200);
}

.tool-icon {
  width: 20px;
  height: 20px;
}

.tool-content {
  flex: 1;
}

.tool-title {
  margin: 0 0 2px 0;
  color: var(--text-primary);
  font-size: 0.9rem;
  font-weight: 600;
}

.tool-desc {
  margin: 0;
  color: var(--text-secondary);
  font-size: 0.8rem;
}

/* çŠ¶æ€åŒºåŸŸ */
.status-section {
  background: var(--gray-50);
  border-radius: var(--border-radius-lg);
  padding: 20px;
  margin-top: 24px;
  border: 1px solid var(--border-color);
}

.status-title {
  margin: 0 0 16px 0;
  color: var(--text-secondary);
  font-size: 0.875rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.status-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 12px;
}

.status-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
  border-bottom: 1px solid var(--gray-200);
}

.status-item:last-child {
  border-bottom: none;
}

.status-label {
  color: var(--text-secondary);
  font-size: 0.875rem;
}

.status-value {
  color: var(--text-primary);
  font-size: 0.875rem;
  font-weight: 500;
  font-family: monospace;
}

.status-value.registered {
  color: var(--color-success);
}

/* å“åº”å¼ */
@media (max-width: 768px) {
  .content {
    padding: 20px 16px;
  }
  
  .test-grid {
    grid-template-columns: 1fr;
  }
  
  .tools-grid {
    grid-template-columns: 1fr;
  }
  
  .status-grid {
    grid-template-columns: 1fr;
  }
}
</style>
