# æ‰“å¡ä¸Šé“¾æ¶æ„å›¾è§£

## ğŸ“ ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ç”¨æˆ·ç§»åŠ¨åº”ç”¨ (å‰ç«¯)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚          CheckinOnchain.vue (æ–°å¢)                      â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ ä¸Šé“¾å­˜è¯æŒ‰é’®    â”‚â”€â”€â”€â”€â†’ â”‚ å®Œæ•´æµç¨‹è§¦å‘        â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚                                 â†“                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚    â”‚
â”‚  â”‚  â”‚ å­˜è¯å†å²åˆ—è¡¨                                â”‚       â”‚    â”‚
â”‚  â”‚  â”‚ - CIDå±•ç¤º                                 â”‚       â”‚    â”‚
â”‚  â”‚  â”‚ - Merkleæ ¹å±•ç¤º                            â”‚       â”‚    â”‚
â”‚  â”‚  â”‚ - äº¤æ˜“å“ˆå¸Œ                                â”‚       â”‚    â”‚
â”‚  â”‚  â”‚ - IPFSç½‘å…³é“¾æ¥                            â”‚       â”‚    â”‚
â”‚  â”‚  â”‚ - éªŒè¯æŒ‰é’®                                â”‚       â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚    â”‚
â”‚  â”‚                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“â†‘ åŒå‘é€šä¿¡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯æœåŠ¡å±‚ (Services)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ checkinStorageService (å·²æœ‰)                          â”‚     â”‚
â”‚  â”‚  - getAllRecords()         (è·å–æ‰€æœ‰æ‰“å¡è®°å½•)         â”‚     â”‚
â”‚  â”‚  - getRecordsByDateRange() (æŒ‰æ—¥æœŸèŒƒå›´æŸ¥è¯¢)           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â†“ è¯»å–                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ checkinAttestationService (æ–°å¢) â­ Layer 1           â”‚     â”‚
â”‚  â”‚  - packageAttestation()    (æ‰“åŒ…æ•°æ®)                â”‚     â”‚
â”‚  â”‚  - calculateDataHash()     (è®¡ç®—å“ˆå¸Œ)                â”‚     â”‚
â”‚  â”‚  - è¾“å‡º: CheckinAttestation JSON                     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â†“ ä¸Šä¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ipfsService (æ–°å¢) â­ Layer 2                         â”‚     â”‚
â”‚  â”‚  - uploadToPinata()    (ä¸Šä¼ åˆ°Pinata)                â”‚     â”‚
â”‚  â”‚  - uploadToWeb3Storage (ä¸Šä¼ åˆ°Web3)                  â”‚     â”‚
â”‚  â”‚  - readFromIPFS()      (ä»IPFSè¯»å–)                  â”‚     â”‚
â”‚  â”‚  - è¾“å‡º: { cid, gateway }                            â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â†“ ä¸Šé“¾                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ onchainAttestationService (æ–°å¢) â­ Layer 3           â”‚     â”‚
â”‚  â”‚  - attestOnchain()     (ä¸Šé“¾å­˜è¯)                    â”‚     â”‚
â”‚  â”‚  - verifyOnchain()     (éªŒè¯é“¾ä¸Šæ•°æ®)                â”‚     â”‚
â”‚  â”‚  - è¾“å‡º: { txHash, blockNumber }                     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â†“ ä¿å­˜                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Preferences (å·²æœ‰)                                    â”‚     â”‚
â”‚  â”‚  - å­˜å‚¨å­˜è¯è®°å½•                                       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ HTTPS/JSON-RPC â†“â†‘ ERC-4337 UserOp
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åç«¯ä¸åŒºå—é“¾æœåŠ¡                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  IPFSç½‘å…³æœåŠ¡       â”‚    â”‚  åŒºå—é“¾åŸºç¡€è®¾æ–½         â”‚        â”‚
â”‚  â”‚  - Pinata          â”‚    â”‚  - Bundler             â”‚        â”‚
â”‚  â”‚  - Web3.Storage    â”‚    â”‚  - RPCèŠ‚ç‚¹             â”‚        â”‚
â”‚  â”‚  - Filecoin        â”‚    â”‚  - Paymaster           â”‚        â”‚
â”‚  â”‚                    â”‚    â”‚  - EntryPointåˆçº¦      â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚           â†“                           â†“                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚           åˆ†å¸ƒå¼å­˜å‚¨ (IPFS)                         â”‚        â”‚
â”‚  â”‚                                                      â”‚        â”‚
â”‚  â”‚  QmXxxx...      (Attestation JSON)                â”‚        â”‚
â”‚  â”‚  - å®Œæ•´æ‰“å¡æ•°æ®                                     â”‚        â”‚
â”‚  â”‚  - Merkleæ ‘ä¿¡æ¯                                    â”‚        â”‚
â”‚  â”‚  - ä¸åŒ…å«ç›å€¼ã€ç§é’¥                                 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚         æ™ºèƒ½åˆçº¦ (Blockchain)                       â”‚        â”‚
â”‚  â”‚                                                      â”‚        â”‚
â”‚  â”‚  CheckinAttestation.sol                           â”‚        â”‚
â”‚  â”‚  â”œâ”€ recordAttestation()  (è®°å½•å­˜è¯)               â”‚        â”‚
â”‚  â”‚  â”œâ”€ getAttestation()     (æŸ¥è¯¢å­˜è¯)               â”‚        â”‚
â”‚  â”‚  â””â”€ markVerified()       (æ ‡è®°éªŒè¯)               â”‚        â”‚
â”‚  â”‚                                                      â”‚        â”‚
â”‚  â”‚  å­˜å‚¨æ•°æ®:                                          â”‚        â”‚
â”‚  â”‚  â”œâ”€ user: 0xAbc123...   (ç”¨æˆ·åœ°å€)               â”‚        â”‚
â”‚  â”‚  â”œâ”€ ipfsCID: "QmXxxx..."  (IPFSé“¾æ¥)             â”‚        â”‚
â”‚  â”‚  â”œâ”€ merkleRoot: 0xabcd... (éªŒè¯ç”¨)               â”‚        â”‚
â”‚  â”‚  â”œâ”€ dataHash: 0x1234...  (å®Œæ•´æ€§æ ¡éªŒ)            â”‚        â”‚
â”‚  â”‚  â””â”€ timestamp: 1700000000 (æ—¶é—´æˆ³)               â”‚        â”‚
â”‚  â”‚                                                      â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ å·¥ä½œæµç¨‹åºåˆ—å›¾

```
ç”¨æˆ·              å‰ç«¯              IPFS            åŒºå—é“¾         Paymaster
â”‚                  â”‚                 â”‚                 â”‚               â”‚
â”‚ 1. ç‚¹å‡»"ä¸Šé“¾"     â”‚                 â”‚                 â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                 â”‚                 â”‚               â”‚
â”‚                  â”‚                 â”‚                 â”‚               â”‚
â”‚                  â”‚ 2. packageAttestation()            â”‚               â”‚
â”‚                  â”‚    - è¯»å–æ‰“å¡è®°å½•                 â”‚               â”‚
â”‚                  â”‚    - æ„å»ºMerkleæ ‘                 â”‚               â”‚
â”‚                  â”‚    - ç”ŸæˆJSONåŒ…                   â”‚               â”‚
â”‚                  â”‚                 â”‚                 â”‚               â”‚
â”‚                  â”‚ 3. ipfsService.upload()            â”‚               â”‚
â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                 â”‚               â”‚
â”‚                  â”‚                 â”‚                 â”‚               â”‚
â”‚                  â”‚ â† CIDè¿”å› â†â”€â”€â”€â”€â”¤                 â”‚               â”‚
â”‚                  â”‚                 â”‚                 â”‚               â”‚
â”‚                  â”‚ 4. calculateMerkleRoot()           â”‚               â”‚
â”‚                  â”‚ 5. calculateDataHash()             â”‚               â”‚
â”‚                  â”‚                 â”‚                 â”‚               â”‚
â”‚                  â”‚ 6. encodeFunctionData()            â”‚               â”‚
â”‚                  â”‚    recordAttestation(CID, root...)â”‚               â”‚
â”‚                  â”‚                 â”‚                 â”‚               â”‚
â”‚                  â”‚ 7. buildUserOperation()            â”‚               â”‚
â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚               â”‚
â”‚                  â”‚                 â”‚                 â”‚  requestGas    â”‚
â”‚                  â”‚                 â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
â”‚                  â”‚                 â”‚                 â”‚ gasèµåŠ© â†â”€â”€â”€â”€â”€â”¤
â”‚                  â”‚ 8. signUserOp()                    â”‚               â”‚
â”‚                  â”‚    (ä½¿ç”¨ECCç­¾å)                   â”‚               â”‚
â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ submit â†â”€â”€â”€â”€â”€â”¤
â”‚                  â”‚                 â”‚                 â”‚               â”‚
â”‚                  â”‚  â† äº¤æ˜“å“ˆå¸Œ â†â”€â”€â”€â”¤                 â”‚               â”‚
â”‚                  â”‚                 â”‚                 â”‚               â”‚
â”‚                  â”‚ 9. saveAttestationRecord()         â”‚               â”‚
â”‚                  â”‚    (å­˜å‚¨åˆ°Preferences)             â”‚               â”‚
â”‚                  â”‚                 â”‚                 â”‚               â”‚
â”‚ â† æ˜¾ç¤ºæˆåŠŸ â†â”€â”€â”€â”€â”€â”¤                 â”‚                 â”‚               â”‚
â”‚   - CID                            â”‚                 â”‚               â”‚
â”‚   - TxHash                         â”‚                 â”‚               â”‚
â”‚   - Gateway                        â”‚                 â”‚               â”‚
â”‚                  â”‚                 â”‚                 â”‚               â”‚
â”‚ 10. (å¯é€‰) éªŒè¯  â”‚                 â”‚                 â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                 â”‚                 â”‚               â”‚
â”‚                  â”‚ readFromIPFS()  â”‚                 â”‚               â”‚
â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                 â”‚               â”‚
â”‚                  â”‚ â† JSONæ•°æ® â†â”€â”€â”€â”€â”¤                 â”‚               â”‚
â”‚                  â”‚                 â”‚                 â”‚               â”‚
â”‚                  â”‚ calculateMerkleRoot()              â”‚               â”‚
â”‚                  â”‚ vsé“¾ä¸ŠmerkleRoot                   â”‚               â”‚
â”‚                  â”‚                 â”‚                 â”‚               â”‚
â”‚ â† éªŒè¯æˆåŠŸ â†â”€â”€â”€â”€â”€â”¤                 â”‚                 â”‚               â”‚
â”‚                  â”‚                 â”‚                 â”‚               â”‚
```

---

## ğŸ“Š æ•°æ®å­˜å‚¨æ¶æ„

### æœ¬åœ°å­˜å‚¨å±‚ (Preferences)

```
Preferences (è®¾å¤‡å­˜å‚¨ - ç§å¯†)
â”‚
â”œâ”€ "checkin_records"
â”‚  â””â”€ CheckInRecord[] {
â”‚     â”œâ”€ id: "checkin_123"
â”‚     â”œâ”€ timestamp: 1700000000
â”‚     â”œâ”€ medication_code: "ASPIRIN"
â”‚     â”œâ”€ medication_name: "é˜¿å¸åŒ¹æ—"
â”‚     â”œâ”€ dosage: "100mg"
â”‚     â”œâ”€ user_address: "0xAbc123..."
â”‚     â”œâ”€ user_id_salt: "0x..."          â† ç§å¯†ï¼Œä¸ç¦»å¼€è®¾å¤‡
â”‚     â”œâ”€ medication_salt: "0x..."        â† ç§å¯†ï¼Œä¸ç¦»å¼€è®¾å¤‡
â”‚     â”œâ”€ user_id_commitment: "..."
â”‚     â”œâ”€ medication_commitment: "..."
â”‚     â”œâ”€ checkin_commitment: "..."       â† å…³é”®ï¼šMerkleæ ‘å¶å­
â”‚     â”œâ”€ zkp_proof: {...}
â”‚     â”œâ”€ zkp_public_signals: [...]
â”‚     â”œâ”€ synced: true
â”‚     â””â”€ verified: true
â”‚     }
â”‚
â”œâ”€ "checkin_stats"
â”‚  â””â”€ CheckInStats {
â”‚     â”œâ”€ total: 90
â”‚     â”œâ”€ consecutiveDays: 30
â”‚     â”œâ”€ complianceRate: 100
â”‚     â””â”€ ...
â”‚     }
â”‚
â””â”€ "attestation_records"  (æ–°å¢)
   â””â”€ AttestationRecord[] {
      â”œâ”€ ipfsCID: "QmXxxx..."
      â”œâ”€ merkleRoot: "0xabcd..."
      â”œâ”€ txHash: "0x1234..."
      â”œâ”€ timestamp: 1700000000
      â”œâ”€ recordCount: 90
      â””â”€ gateway: "https://..."
      }
```

### IPFSå­˜å‚¨å±‚ (åˆ†å¸ƒå¼)

```
IPFS Network
â”‚
â””â”€ QmXxxx... (CID - å†…å®¹å“ˆå¸Œ)
   â””â”€ CheckinAttestation.json {
      "type": "medical_checkin",
      "version": "1.0",
      "timestamp": 1700000000000,
      "userAddress": "0xAbc123...",
      "startDate": "2025-11-01",
      "endDate": "2025-11-30",
      "stats": {
        "totalCount": 90,
        "daysCovered": 30,
        "completionRate": 100
      },
      "records": [           â† å…¬å¼€æ•°æ®ï¼Œæ— æ•æ„Ÿä¿¡æ¯
        {
          "id": "checkin_123",
          "timestamp": 1700000000000,
          "medication_code": "ASPIRIN",
          "medication_name": "é˜¿å¸åŒ¹æ—",
          "dosage": "100mg",
          "checkin_commitment": "1234567890abcdef...",
          "synced": true
        },
        ...
      ],
      "merkleInfo": {
        "leaves": [         â† 128ä¸ªcommitments
          "1234567890abcdef...",
          "2345678901bcdef0...",
          ...
          "0",
          "0"
        ],
        "merkleRoot": "abcdef0123456789...",
        "treeDepth": 7
      }
    }

ç½‘å…³è®¿é—®:
- Pinata: https://gateway.pinata.cloud/ipfs/QmXxxx...
- Web3:   https://QmXxxx....ipfs.dweb.link
- IPFS:   ipfs://QmXxxx...
```

### é“¾ä¸Šå­˜å‚¨å±‚ (åŒºå—é“¾)

```
Blockchain (ä»¥å¤ªåŠç­‰)
â”‚
â””â”€ SmartContract: CheckinAttestation
   â”‚
   â”œâ”€ State Variable: attestations
   â”‚  â””â”€ mapping(bytes32 => AttestationRecord)
   â”‚     â”‚
   â”‚     â””â”€ attHash = keccak256(user, cid, root, time)
   â”‚        â”‚
   â”‚        â””â”€ AttestationRecord {
   â”‚           â”œâ”€ user: 0xAbc123...          (20 bytes)
   â”‚           â”œâ”€ ipfsCID: "QmXxxx..."       (48+ bytes)
   â”‚           â”œâ”€ merkleRoot: 0xabcd...      (32 bytes)
   â”‚           â”œâ”€ dataHash: 0x1234...        (32 bytes)
   â”‚           â”œâ”€ timestamp: 1700000000      (8 bytes)
   â”‚           â”œâ”€ recordCount: 90            (32 bytes)
   â”‚           â””â”€ verified: true             (1 byte)
   â”‚           }
   â”‚
   â”œâ”€ State Variable: userAttestations
   â”‚  â””â”€ mapping(address => bytes32[])
   â”‚     â””â”€ user_address => [attHash1, attHash2, ...]
   â”‚
   â”œâ”€ Event: AttestationRecorded
   â”‚  â””â”€ (indexed user, indexed attHash, ipfsCID, merkleRoot, timestamp)
   â”‚
   â””â”€ Event: AttestationVerified
      â””â”€ (indexed attHash, verified, verifyTime)

å­˜å‚¨æˆæœ¬: ~70k gas
```

---

## ğŸ” æ•°æ®æµå‘å›¾

### æ•°æ®éšç§ä¿æŠ¤

```
â”Œâ”€ åŸå§‹æ•°æ® â”€â”
â”‚            â”‚
â”‚ userId     â”‚  âŒ æ°¸ä¸ä¸Šä¼ 
â”‚ medCode    â”‚  âŒ æ°¸ä¸ä¸Šé“¾
â”‚ userSalt   â”‚  âŒ æ°¸ä¸ç¦»å¼€è®¾å¤‡
â”‚ medSalt    â”‚
â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“ (æœ¬åœ°Poseidonå“ˆå¸Œ)
â”Œâ”€ Commitments â”€â”
â”‚               â”‚
â”‚ commitment1   â”‚  âœ… å¯ä»¥ä¸Šé“¾
â”‚ commitment2   â”‚  âœ… å¯ä»¥ä¸ŠIPFS
â”‚ commitment3   â”‚  âœ… å¯ä»¥å…¬å¼€
â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“ (æœ¬åœ°æ’åº)
â”Œâ”€ Merkleæ ‘ â”€â”
â”‚            â”‚
â”‚ leaves[]   â”‚  âœ… ä¸Šä¼ åˆ°IPFS
â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“ (æœ¬åœ°è®¡ç®—)
â”Œâ”€ Merkleæ ¹ â”€â”
â”‚            â”‚
â”‚ rootHash   â”‚  âœ… ä¸Šé“¾è®°å½•
â”‚            â”‚  (ç”¨äºéªŒè¯)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç»“æœ:
- ğŸ“± è®¾å¤‡ç«¯: ä¿ç•™æ‰€æœ‰æ•æ„Ÿä¿¡æ¯
- ğŸŒ IPFS: å­˜å‚¨å…¬å¼€æ•°æ® + commitments
- â›“ï¸  é“¾ä¸Š: åªå­˜ç´¢å¼•å’Œå“ˆå¸Œ
```

---

## ğŸ”„ Merkleæ ‘ç»“æ„

### æ ‘çš„æ„å»ºè¿‡ç¨‹

```
è¾“å…¥: 90æ¡æ‰“å¡è®°å½•çš„commitments

æ­¥éª¤1: æ’åºæ‰€æœ‰commitments
       [c1, c2, c3, ..., c90]

æ­¥éª¤2: å¡«å……åˆ°128ä¸ª (2^7 = 128)
       [c1, c2, c3, ..., c90, 0, 0, ..., 0] (128ä¸ªå¶å­)

æ­¥éª¤3: æ„å»ºæ ‘ (7å±‚)

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   merkleRoot    â”‚ â† é“¾ä¸Šè®°å½•è¿™ä¸ª
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                 â”‚                 â”‚
      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
      â”‚ node1   â”‚      â”‚ node2   â”‚      â”‚ node3   â”‚
      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
           â”‚                â”‚                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
    â”‚            â”‚   â”‚            â”‚   â”‚            â”‚
  [c1]  [c2]  [c3] [c4]  ...   [c128]

æ€»å…±7å±‚:
- Layer 0: 128ä¸ªå¶å­ (commitments)
- Layer 1: 64ä¸ªèŠ‚ç‚¹  (c1+c2, c3+c4, ...)
- Layer 2: 32ä¸ªèŠ‚ç‚¹
- Layer 3: 16ä¸ªèŠ‚ç‚¹
- Layer 4: 8ä¸ªèŠ‚ç‚¹
- Layer 5: 4ä¸ªèŠ‚ç‚¹
- Layer 6: 2ä¸ªèŠ‚ç‚¹
- Layer 7: 1ä¸ªæ ¹èŠ‚ç‚¹ (merkleRoot)

éªŒè¯æˆæœ¬: O(log 128) = O(7) = 7æ¬¡å“ˆå¸Œè®¡ç®—
```

### Merkleè·¯å¾„éªŒè¯

```
éªŒè¯: c1 æ˜¯å¦åœ¨æ ‘ä¸­ï¼Ÿ

æä¾›:
- commitment: c1
- proof path: [h(c2), h(node12), h(node34), h(node56), h(node78), h(node12_78), h(root)]

éªŒè¯æ­¥éª¤:
1. è®¡ç®—: hash(c1, c2) = h(node12)  âœ“
2. è®¡ç®—: hash(h(node12), h(node34)) = h(node1234) âœ“
3. è®¡ç®—: hash(...) = ... âœ“
...
7. æœ€ç»ˆè®¡ç®—å‡º: merkleRoot âœ“

ç»“è®º: c1 ç¡®å®åœ¨æ ‘ä¸­ï¼âœ…
å¤æ‚åº¦: O(7) = O(log 128)
```

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### æ—¶é—´æˆæœ¬

```
æ“ä½œ              è€—æ—¶        è¯´æ˜
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ‰“åŒ…æ•°æ®         2-3ç§’      è¯»å–+è®¡ç®—
è®¡ç®—Merkleæ ¹      1-2ç§’      Poseidonå“ˆå¸Œ
ä¸Šä¼ IPFS         3-5ç§’      ç½‘ç»œä¼ è¾“
æ„å»ºUserOp       1-2ç§’      ç­¾å+ç¼–ç 
æäº¤Bundler      5-10ç§’     ç­‰å¾…æ‰“åŒ…
ç¡®è®¤äº¤æ˜“         10-30ç§’    åŒºå—ç¡®è®¤
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡             22-53ç§’    ç«¯åˆ°ç«¯æ—¶é—´

å¹¶è¡Œä¼˜åŒ–:
- IPFSä¸Šä¼ å’ŒUserOpæ„å»ºå¯å¹¶è¡Œ
- å¯å‡å°‘åˆ° 15-30ç§’
```

### ç©ºé—´æˆæœ¬

```
æ•°æ®é¡¹                  å¤§å°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
String CID (QmXxx...)   48 bytes
bytes32 merkleRoot      32 bytes
bytes32 dataHash        32 bytes
uint256 timestamp       32 bytes
uint256 recordCount     32 bytes
address user            20 bytes
bool verified           1 byte
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ€»è®¡                    197 bytes
å­˜å‚¨æˆæœ¬ (1KB â‰ˆ 20k gas)  â‰ˆ 4k gas

åˆçº¦æ‰§è¡Œ        â‰ˆ 30k gas
æ€»è®¡            â‰ˆ 70k gas @ $150/gwei â‰ˆ $2.1
```

---

## ğŸ›¡ï¸ å®‰å…¨æ¶æ„

### è®¿é—®æ§åˆ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ERC-4337 Smart Account (ç”¨æˆ·è´¦æˆ·)  â”‚
â”‚  - Owner: ç”¨æˆ·EOA (ç­¾åäºº)         â”‚
â”‚  - Guardians: æ¢å¤è”ç³»äºº           â”‚
â”‚  - Threshold: æ¢å¤é˜ˆå€¼             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ åªèƒ½é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰§è¡Œ
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UserOperation (ç”±Bundleræ‰§è¡Œ)       â”‚
â”‚  - sender: Smart Account            â”‚
â”‚  - callData: åˆçº¦å‡½æ•°è°ƒç”¨           â”‚
â”‚  - signature: ç”¨æˆ·EOAçš„ç­¾å         â”‚
â”‚  - nonce: é˜²é‡æ”¾æ”»å‡»                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ æäº¤åˆ°
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EntryPoint (ç³»ç»Ÿåˆçº¦)               â”‚
â”‚  - éªŒè¯ç­¾å                         â”‚
â”‚  - æ£€æŸ¥nonce                        â”‚
â”‚  - è°ƒç”¨Paymaster                    â”‚
â”‚  - æ‰§è¡ŒUserOp                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ æœ€ç»ˆè°ƒç”¨
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CheckinAttestation (ä¸šåŠ¡åˆçº¦)       â”‚
â”‚  - recordAttestation()              â”‚
â”‚  - éªŒè¯senderæ˜¯åˆçº¦è°ƒç”¨è€…           â”‚
â”‚  - è®°å½•å­˜è¯                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æƒé™é“¾: ç”¨æˆ·EOA â†’ Smart Account â†’ UserOp â†’ EntryPoint â†’ Business Contract
âœ… ä¿è¯åªæœ‰ç”¨æˆ·èƒ½æ‰§è¡Œæ“ä½œ
```

---

## ğŸ“ ä¿¡æ¯æµæ€»ç»“

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 1: ç”¨æˆ·äº¤äº’                               â”‚
â”‚  - ç‚¹å‡»"ä¸Šé“¾å­˜è¯"æŒ‰é’®                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 2: å‰ç«¯é€»è¾‘                               â”‚
â”‚  - è¯»å–æ‰“å¡æ•°æ® (Preferences)                  â”‚
â”‚  - æ„å»ºMerkleæ ‘                                 â”‚
â”‚  - è®¡ç®—å„é¡¹å“ˆå¸Œ                                 â”‚
â”‚  - ç”ŸæˆJSONåŒ…                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 3: IPFSå­˜å‚¨                               â”‚
â”‚  - ä¸Šä¼ JSONåŒ…                                   â”‚
â”‚  - è·å–CID                                      â”‚
â”‚  - è¿”å›ç½‘å…³URL                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 4: é“¾ä¸Šè®°å½•                               â”‚
â”‚  - æ„å»ºUserOperation                            â”‚
â”‚  - ç­¾å (ä½¿ç”¨EOA)                              â”‚
â”‚  - æäº¤åˆ°Bundler                                â”‚
â”‚  - ç­‰å¾…ç¡®è®¤                                     â”‚
â”‚  - è®°å½• CID + Merkleæ ¹ + å“ˆå¸Œ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 5: éªŒè¯ (å¯é€‰)                            â”‚
â”‚  - ä»IPFSè¯»å–æ•°æ®                              â”‚
â”‚  - é‡æ–°è®¡ç®—å“ˆå¸Œå’ŒMerkleæ ¹                       â”‚
â”‚  - ä¸é“¾ä¸Šæ•°æ®å¯¹æ¯”                               â”‚
â”‚  - è¿”å›éªŒè¯ç»“æœ                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¿¡æ¯æµå®Œæ•´ï¼Œä»ç§å¯†åˆ°å…¬å¼€ï¼Œä»æœ¬åœ°åˆ°å…¨çƒï¼Œ
æœ€ç»ˆå®ç°æ•°æ®ä¸å¯ç¯¡æ”¹çš„å­˜è¯ï¼
```

---

**ç‰ˆæœ¬**: 1.0  
**æ—¥æœŸ**: 2025-11-23  
**çŠ¶æ€**: âœ… å®Œæˆ


